add_subdirectory(chipmunk)
add_subdirectory(freetype)
add_subdirectory(kazmath)
add_subdirectory(parson)
add_subdirectory(physfs)
add_subdirectory(rxi_map)
add_subdirectory(zlib)
add_subdirectory(libuv)
add_subdirectory(wren)

if (NOT EMSCRIPTEN)
	add_subdirectory(sdl EXCLUDE_FROM_ALL)
    add_subdirectory(vorbis)
    add_subdirectory(ogg)
else()
    add_subdirectory(lua)
    add_subdirectory(luasocket)
endif()

if (APPLE AND NOT IOS AND NOT WATCHOS)
    add_subdirectory(glew)
    # we're using lua instead of luajit on macos to be able to test with valgrind
    #add_subdirectory(luajit)
#    add_subdirectory(lua)
#    add_subdirectory(newton)
    if (BINOCLE_HTTP)
        add_subdirectory(curl)
    endif ()
    if (BINOCLE_LUAJIT)
        message(STATUS "LUAJIT support enabled")
        add_definitions(-DBINOCLE_LUAJIT)

        option(LUAJIT_DIR "Path of LuaJIT 2.1 source dir" ON)
        SET(LUAJIT_LIBRARIES luajit-5.1)
        SET(LUAJIT_DIR ${CMAKE_CURRENT_SOURCE_DIR}/luajit)
        SET(WITH_SHARED_LUA OFF)
        SET(WITH_OBJECT_LUA ON)
        add_subdirectory(luajit-cmake)
        add_subdirectory(luasocket)
    else ()
        add_subdirectory(lua)
        add_subdirectory(luasocket)
    endif ()
endif()

if (ANDROID)
    add_subdirectory(vorbisidec)
    add_subdirectory(lua)
    add_subdirectory(luasocket)
    #add_subdirectory(luajit)
endif()

if (IOS)
    add_subdirectory(lua)
    add_subdirectory(luasocket)
endif()

if (WATCHOS)
    add_subdirectory(lua)
    add_subdirectory(luasocket)
endif()

if (MSVC)
    add_subdirectory(glew)
    # we're using lua instead of luajit on macos to be able to test with valgrind
    #add_subdirectory(luajit)
    add_subdirectory(lua)
    add_subdirectory(luasocket)
    if (BINOCLE_HTTP)
        add_subdirectory(curl)
    endif ()
endif()

